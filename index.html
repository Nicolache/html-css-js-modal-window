<!DOCTYPE html>
<html> 
<head>
  <title>Modal window</title>
  <style>
    canvas {
      display: block;
    }
    html, body {
        height: 100%;
        width: 100%;
      margin: 0;
      padding: 0;
    }
#blockscreen, #modalwindow {
    position: fixed;
}
#blockscreen {
    background: rgba(0, 0, 0, .5);
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: 10;
}
#modalwindow {
    z-index: 11;
    background: #fff;
    padding: 5px;
    border-radius: 5px;
    border: 1px solid #a1a1a1;
    box-shadow: 0 0 10px #444;
}
#modal_close {
    left: 1%;
    text-align: center;
    margin-left: 96%;
}
  </style>
</head> 
<body onload="modalWindow.show(500)">
<!-- <body> -->
<h1>privet</h1>
<div onclick="modalWindow.show(500)">Show modal window</div>

  <script>
var modal_html = '<div id="modal_close" onClick="modalWindow.close()">X</div>To be, or not to be, that is the question:<br>Whether tis nobler in the mind to suffer<br>The slings and arrows of outrageous fortune,<br>Or to take Arms against a Sea of troubles,<br>And by opposing end them: to die, to sleep'
// https://habrahabr.ru/sandbox/54323/

document.addEventListener('keydown', modalEscClose);

function modalEscClose (e) {
    if ( !e.keyCode || e.keyCode === 27 ) {
        document.getElementById('blockscreen').style.display = 'none';
        document.getElementById('modalwindow').style.display = 'none';
    }
}
//console.log(document.body)
//console.dir(document.body)
var modalWindow = {
    _block: null,
    _win: null,


initBlock: function() {
        _block = document.getElementById('blockscreen'); //Получаем наш блокирующий фон по ID

        //Если он не определен, то создадим его
        if (!_block) {
            var parent = document.getElementsByTagName('body')[0]; //Получим первый элемент тега body
            var obj = parent.firstChild; //Для того, чтобы вставить наш блокирующий фон в самое начало тега body
            _block = document.createElement('div'); //Создаем элемент div
            _block.id = 'blockscreen'; //Присваиваем ему наш ID
            parent.insertBefore(_block, obj); //Вставляем в начало
            _block.onclick = function() { modalWindow.close(); } //Добавим обработчик события по нажатию на блокирующий экран - закрыть модальное окно.
        }
        _block.style.display = 'inline'; //Установим CSS-свойство        
    },
initWin: function(width) {
        _win = document.getElementById('modalwindow'); //Получаем наше диалоговое окно по ID
        //Если оно не определено, то также создадим его по аналогии
        if (!_win) {
            var parent = document.getElementsByTagName('body')[0];
            var obj = parent.firstChild;
            _win = document.createElement('div');
            _win.id = 'modalwindow';
            _win.style.padding = '0 0 5px 0';
//            _win.onclick = function() { modalWindow.close(); } //Добавим обработчик события по нажатию на блокирующий экран - закрыть модальное окно.
//            _win.keypress = function(e) { debugger; if ( !e.keyCode |s| e.keyCode === 27 ) { modalWindow.close(); } };
            parent.insertBefore(_win, obj);
        }
        _win.style.width = width + 'px'; //Установим ширину окна
        _win.style.display = 'inline'; //Зададим CSS-свойство
        
        _win.innerHTML = modal_html; //Добавим нужный HTML-текст в наше диалоговое окно
//        _win.innerHTML = '<iframe src="window.html" width="100%" height="100%"></iframe>'; //Добавим нужный HTML-текст в наше диалоговое окно
        
        //Установим позицию по центру экрана

        _win.style.left = '50%'; //Позиция по горизонтали
        _win.style.top = '50%'; //Позиция по вертикали

        //Выравнивание по центру путем задания отрицательных отступов
        _win.style.marginTop = -(_win.offsetHeight / 2) + 'px'; 
        _win.style.marginLeft = -(width / 2) + 'px';
    },
close: function() {
        document.getElementById('blockscreen').style.display = 'none';
        document.getElementById('modalwindow').style.display = 'none';        
    },
 //show: function(width, modal_html) {
 show: function(width) {
        modalWindow.initBlock();
        modalWindow.initWin(width);
    }



 }//Конец описания нашего объекта

  </script> 

</body> 
</html>
